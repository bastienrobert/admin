<div class="container">
  <div class="row">
    <div class="col-md-8 mx-auto">
      <br><br>
      <div class="jumbotron">
        <h1 class="display-4">#<%= @order['invoiceNumber'] %></h1>
        <h3 class="display-6"><%= @order['user']['billingAddressName'] %></h3>
          <%= form_tag order_status_periods_path(@order['token']), method: :post do %>
            <div class="input-group">
              <%= select_tag 'status', options_for_select(status_translate
                    .invert
                    .to_a,
                  selected: @order['status']),
                  class: 'custom-select' %>
              <div class="input-group-append">
                <input class="btn btn-success" type="submit" value="Valider">
              </div>
            </div>
          <% end %>
        <hr class="my-4">
        <h3 class="display-6"><%= @order['items'].count %> élément(s) dans le panier</h3><br>
        <table class="table table-bordered table-light">
          <thead>
            <tr>
              <td scope="col">Nom</td>
              <td scope="col">Quantité</td>
              <td scope="col">Autres</td>
            </tr>
          </thead>
          <tbody>
            <% @order['items'].each do |order| %>
              <tr>
                <td><%= link_to order['name'], order['url'], target: '_blank' %></td>
                <td><%= order['quantity'] %></td>
                <td>
                  <% order['customFields'].each do |f| %>
                    <% if f['name'].downcase == 'couleurs' || f['name'].downcase == 'colors' %>
                      <span style="color: <%= f['displayValue'] %>"><%= f['name'] %></span> -
                    <% else %>
                      <%= f['name'] %> :
                      <%= f['displayValue'] %>
                    <% end %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <hr class="my-4">
        <p>
          <h3 class="display-6">Adresse destinataire</h3>
          <%= @order['user']['shippingAddressName'] %><br>
          <%= @order['user']['shippingAddressAddress1'] %><br>
          <%= @order['user']['shippingAddressAddress2'] %><br>
          <%= @order['user']['shippingAddressPostalCode'] %> - <%= @order['user']['shippingAddressCity'] %><br>
          <%= @order['user']['shippingAddressCountry'] %>
        </p>
        <hr class="my-4">
        <p>
          <% unless @order['user']['shippingAddressSameAsBilling'] %>
            <div class="alert alert-warning" role="alert">
              L'adresse du destinataire n'est pas la même que l'adresse du payeur.
              <b>Il s'agit peut-être d'une surprise</b>
            </div>
            <h3 class="display-6">Contact payeur</h3>
            <a href="tel:<%= @order['user']['shippingAddressPhone'] %>">
              <%= @order['user']['shippingAddressPhone'] %><br>
            </a>
            <%= mail_to @order['user']['email'] %>
          <% end %>
          <h3 class="display-6">Contact destinataire</h3>
          <a href="tel:<%= @order['user']['billingAddressPhone'] %>">
            <%= @order['user']['billingAddressPhone'] %><br>
          </a>
          <% if @order['user']['shippingAddressSameAsBilling'] %>
            <%= mail_to @order['user']['email'] %>
          <% end %>
        </p>
      </div>
    </div>
  </div>
</div>
